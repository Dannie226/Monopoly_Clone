import*as e from"three";import{GLTFLoader as t}from"three/examples/jsm/loaders/GLTFLoader";import{OrbitControls as o}from"three/examples/jsm/controls/OrbitControls";import{RGBELoader as r}from"three/examples/jsm/loaders/RGBELoader";import*as n from"../libs/tween";import{GUI as a}from"dat.gui";const{innerWidth:i,innerHeight:s}=window,d=new e.WebGLRenderer,l=(d.setSize(i,s),d.setClearColor(12571109),document.body.appendChild(d.domElement),new e.Scene),m=new e.PerspectiveCamera(75,i/s,100,3e3),c=(m.position.y=1e3,m.position.x=2e3,new e.DirectionalLight),w=(l.add(c),new o(m,d.domElement)),p=new e.PMREMGenerator(d),_=new t,u=new e.Group,h=new a,f=new e.CatmullRomCurve3([new e.Vector3(600,0,-625),new e.Vector3(625,0,-600),new e.Vector3(625,0,600),new e.Vector3(600,0,625),new e.Vector3(-600,0,625),new e.Vector3(-625,0,600),new e.Vector3(-625,0,-600),new e.Vector3(-600,0,-625)],!0),g=new e.LineSegments((new e.BufferGeometry).setFromPoints(f.getPoints(250)),new e.LineBasicMaterial({color:"red"}));l.add(g);let b;_.load("../scene.glb",function(e){for(const t of["Top_Hat_09_-_Default_0","Iron_09_-_Default_0","Wheel_Barrow_09_-_Default_0","Thimble_09_-_Default_0"]){const o=e.scene.getObjectByName(t);o.geometry.rotateX(-Math.PI/2),o.geometry.rotateY(Math.PI/2),u.add(o)}w.enabled=!1,m.position.set(100,200,0),m.lookAt(0,0,0),u.children[1].add(m),b=new n.Tween(u.children[0].position).to({x:625},15e3).easing(n.Easing.Quintic.InOut).start(),u.add(e.scene.getObjectByName("Board_01_-_Default_0")),u.children[4].geometry.rotateX(-Math.PI/2),u.children[4].position.z=-5,l.add(u)});const L=new r,G=(L.load("https://threejs.org/examples/textures/equirectangular/pedestrian_overpass_1k.hdr",function(e){l.environment=p.fromEquirectangular(e).texture}),new e.Vector3);function P(e){b&&(f.getPointAt(e/15e3%1,u.children[1].position),f.getPointAt((e/15e3+.01)%1,G),u.children[1].lookAt(G)),d.render(l,m),requestAnimationFrame(P)}P(0);