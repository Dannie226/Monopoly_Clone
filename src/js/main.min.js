import*as e from"three";import{GLTFLoader as o}from"three/examples/jsm/loaders/GLTFLoader";import{RGBELoader as t}from"three/examples/jsm/loaders/RGBELoader";import*as r from"../libs/tween";import{GUI as a}from"dat.gui";import{Player as n}from"./logic/Player";import{Globals as i}from"./logic/Globals";const{innerWidth:s,innerHeight:l}=window,m=new e.WebGLRenderer,d=(m.setSize(s,l),m.setClearColor(12571109),document.body.appendChild(m.domElement),new e.Scene),_=new e.PerspectiveCamera(75,s/l,100,3e3),c=(_.position.y=1e3,_.position.x=2e3,i.camera=_,new e.DirectionalLight),h=(d.add(c),new e.PMREMGenerator(m)),p=new o,u=new e.Group,f=new a,g=(p.load("../scene.glb",e=>{for(const r of["Top_Hat_09_-_Default_0","Iron_09_-_Default_0","Wheel_Barrow_09_-_Default_0","Thimble_09_-_Default_0"]){const a=e.scene.getObjectByName(r);a.geometry.rotateX(-Math.PI/2),a.geometry.rotateY(Math.PI/2),u.add(a)}_.position.set(0,975,0),_.quaternion.set(-Math.SQRT1_2,0,0,Math.SQRT1_2);const o=new n(null,"Daniel",u.children[1]),t=new n(null,"Nate",u.children[0]);o.goToPosition(11).then(()=>{setTimeout(()=>{o.goToPosition(10).then(()=>{o.moveBackward(3).then(()=>{o.moveForward(8).then(()=>{t.goToPosition(25)})})})},3e3)}),u.add(e.scene.getObjectByName("Board_01_-_Default_0")),u.children[4].geometry.rotateX(-Math.PI/2),u.children[4].position.z=-5,d.add(u)}),new t);function w(){r.update(),m.render(d,_),requestAnimationFrame(w)}g.load("https://threejs.org/examples/textures/equirectangular/pedestrian_overpass_1k.hdr",function(e){d.environment=h.fromEquirectangular(e).texture}),w();